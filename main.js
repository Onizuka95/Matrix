/*!
    Matrix -- online calculator, Improved
    Version 1.1.0
    (c) 2022-2021 Mohssine,
*/
function saveV(){for(let e=0;e<4;e++){mmatrix[e]=[];for(let t=0;t<4;t++)mmatrix[e].push(+item[4*e+t].value)}v=document.getElementById("varName").value,localStorage.setItem(v,JSON.stringify(mmatrix)),reset(),document.getElementById("varName").value=""}function fTM(){T0=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],T1=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],T2=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],T3=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],plc=RTm,"Rotation"==chose[0].value?(inx=0,T0=Rotation(inx)):"Translate"==chose[0].value?(inx=0,T0=Translate(inx)):"Shear"==chose[0].value?(inx=0,T0=Shear(inx)):"Scale"==chose[0].value&&(inx=0,T0=Scale(inx),src=ScaleM,showR(plc,src)),"Rotation"==chose[1].value?(inx=1,T1=Rotation(inx)):"Translate"==chose[1].value?(inx=1,T1=Translate(inx)):"Shear"==chose[1].value?(inx=1,Shear(inx)):"Scale"==chose[1].value&&(inx=1,T1=Scale(inx),src=ScaleM,showR(plc,src)),"Rotation"==chose[2].value?(inx=2,T2=Rotation(inx)):"Translate"==chose[2].value?(inx=2,T2=Translate(inx)):"Shear"==chose[2].value?(inx=2,T2=Shear(inx)):"Scale"==chose[2].value&&(inx=2,T2=Scale(inx),src=ScaleM,showR(plc,src)),"Rotation"==chose[3].value?(inx=3,T3=Rotation(inx)):"Translate"==chose[3].value?(inx=3,T3=Translate(inx)):"Shear"==chose[3].value?(inx=3,T3=Shear(inx)):"Scale"==chose[3].value&&(inx=3,T3=Scale(inx)),localStorage.setItem("T0",JSON.stringify(T0)),localStorage.setItem("T1",JSON.stringify(T1)),localStorage.setItem("T2",JSON.stringify(T2)),localStorage.setItem("T3",JSON.stringify(T3)),TM=mMultiplication("T0","T1"),console.log(`T0 x T1 = \n    ${TM}`),console.log(`TM  = \n    ${TM}`),localStorage.setItem("TM",JSON.stringify(TM)),TM=mMultiplication("TM","T2"),console.log(`TM x T2 = \n    ${TM}`),localStorage.setItem("TM",JSON.stringify(TM)),TM=mMultiplication("TM","T3"),console.log(`TM x T3 = \n    ${TM}`),localStorage.setItem("TM",JSON.stringify(TM)),console.log(`TM  = \n    ${TM}`),showR(plc,TM)}function Rotation(e){return""==document.getElementsByClassName("item")[2+3*e].value&&""==document.getElementsByClassName("item")[0+3*e].value&&""!==document.getElementsByClassName("item")[1+3*e].value?(deg=document.getElementsByClassName("item")[1+3*e].value,degr(deg),[[cos,0,sin,0],[0,1,0,0],[-sin,0,cos,0],[0,0,0,1]]):""==document.getElementsByClassName("item")[0+3*e].value&&""!==document.getElementsByClassName("item")[2+3*e].value&&""==document.getElementsByClassName("item")[1+3*e].value?(deg=document.getElementsByClassName("item")[2+3*e].value,degr(deg),[[cos,-sin,0,0],[sin,cos,0,0],[0,0,1,0],[0,0,0,1]]):""==document.getElementsByClassName("item")[1+3*e].value&&""!==document.getElementsByClassName("item")[0+3*e].value&&""==document.getElementsByClassName("item")[2+3*e].value?(deg=document.getElementsByClassName("item")[0+3*e].value,degr(deg),[[1,0,0,0],[0,cos,-sin,0],[0,sin,cos,0],[0,0,0,1]]):[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]}function Translate(e){return xt=+document.getElementsByClassName("item")[0+3*e].value,yt=+document.getElementsByClassName("item")[1+3*e].value,zt=+document.getElementsByClassName("item")[2+3*e].value,[[1,0,0,xt],[0,1,0,yt],[0,0,1,zt],[0,0,0,1]]}function Shear(e){return""==document.getElementsByClassName("item")[2+3*e].value&&""!==document.getElementsByClassName("item")[0+3*e].value&&""!==document.getElementsByClassName("item")[1+3*e].value?(Cx=+document.getElementsByClassName("item")[0+3*e].value,Cy=+document.getElementsByClassName("item")[1+3*e].value,[[1,0,Cx,0],[0,1,Cy,0],[0,0,1,0],[0,0,0,1]]):""!==document.getElementsByClassName("item")[0+3*e].value&&""!==document.getElementsByClassName("item")[2+3*e].value&&""==document.getElementsByClassName("item")[1+3*e].value?(Cx=+document.getElementsByClassName("item")[0+3*e].value,Cz=+document.getElementsByClassName("item")[2+3*e].value,[[1,Cx,0,0],[0,1,0,0],[0,Cz,1,0],[0,0,0,1]]):""!==document.getElementsByClassName("item")[1+3*e].value&&""==document.getElementsByClassName("item")[0+3*e].value&&""!==document.getElementsByClassName("item")[2+3*e].value?(Cy=+document.getElementsByClassName("item")[1+3*e].value,Cz=+document.getElementsByClassName("item")[2+3*e].value,[[1,0,0,0],[Cy,1,0,0],[Cz,0,1,0],[0,0,0,1]]):[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]}function Scale(e){return xs=+document.getElementsByClassName("item")[0+3*e].value||1,ys=+document.getElementsByClassName("item")[1+3*e].value||1,zs=+document.getElementsByClassName("item")[2+3*e].value||1,ScaleM=[[xs,0,0,0],[0,ys,0,0],[0,0,zs,0],[0,0,0,1]]}function mMultiplication(e,t){rslm=[[],[],[],[]],xg=JSON.parse(localStorage.getItem(e)),rg=JSON.parse(localStorage.getItem(t));for(let e=0;e<4;e++)for(let t=0;t<4;t++){Mit=0;for(let a=0;a<4;a++)Mit+=+xg[a][e]*+rg[t][a];rslm[t].push(Mit)}return rslm}function degr(e){var t=Math.PI/180*e;cos=Math.cos(t).toFixed(3),sin=Math.sin(t).toFixed(3)}function showR(e,t){for(let a=0;a<4;a++)for(let l=0;l<4;l++)e[l+4*a].value=t[a][l]}function reset(){for(let e=0;e<16;e++)item[e].value=""}item=document.getElementsByName("item"),RTm=document.getElementsByClassName("TM"),final=document.getElementsByName("itemF"),mmatrix=[],varName.onkeyup=function(){localStorage.getItem(varName.value)?showR(item,JSON.parse(localStorage.getItem(varName.value))):reset()},chose=document.getElementsByTagName("select"),document.querySelectorAll(".opr button")[0].addEventListener("click",(function(e){e.preventDefault(),first=document.querySelectorAll(".opr input")[1].value,secon=document.querySelectorAll(".opr input")[0].value,therslt=document.querySelectorAll(".opr input")[2].value,am=first,bm=secon,mMultiplication(am,bm),showR(final,rslm),localStorage.setItem(therslt,JSON.stringify(rslm))}));
